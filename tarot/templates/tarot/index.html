{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section - Modern & Dramatic -->
<section class="hero-section-modern" style="background: linear-gradient(135deg, {{ hero_section.background_gradient_start|default:'#6B1B3D' }} 0%, {{ hero_section.background_gradient_end|default:'#4A0E2A' }} 100%); padding: 120px 0 80px; position: relative; overflow: hidden;">
    <!-- Decorative Elements -->
    <div style="position: absolute; top: -50px; right: -50px; width: 300px; height: 300px; background: rgba(255, 255, 255, 0.03); border-radius: 50%; filter: blur(60px);"></div>
    <div style="position: absolute; bottom: -100px; left: -100px; width: 400px; height: 400px; background: rgba(255, 255, 255, 0.02); border-radius: 50%; filter: blur(80px);"></div>
    
    <div class="container position-relative">
        <div class="row align-items-center g-5">
            <!-- Left Column - Text Content -->
            <div class="col-lg-6">
                {% if hero_section.show_announcement and hero_section.announcement_text %}
                <div class="mb-3">
                    <a href="{{ hero_section.announcement_link|default:'#' }}" 
                       class="badge px-4 py-2 text-decoration-none d-inline-flex align-items-center animate__animated animate__pulse animate__infinite" 
                       style="background: {{ hero_section.announcement_color|default:'#FF0000' }}20; 
                              color: {{ hero_section.announcement_color|default:'#FF0000' }}; 
                              border: 2px solid {{ hero_section.announcement_color|default:'#FF0000' }}50; 
                              border-radius: 30px; 
                              font-size: 0.95rem; 
                              font-weight: 600;
                              transition: all 0.3s ease;">
                        <i class="{{ hero_section.announcement_icon|default:'fas fa-bullhorn' }} me-2"></i>
                        <span>{{ hero_section.announcement_text }}</span>
                        {% if hero_section.announcement_link %}
                        <i class="fas fa-arrow-right ms-2"></i>
                        {% endif %}
                    </a>
                </div>
                {% else %}
                <div class="mb-3">
                    <span class="badge px-4 py-2" style="background: rgba(255, 214, 0, 0.2); color: #ffd600; border: 1px solid rgba(255, 214, 0, 0.3); border-radius: 30px; font-size: 0.9rem; font-weight: 600;">
                        <i class="fas fa-brain me-2"></i>AI Destekli Kişisel Gelişim Platformu
                    </span>
                </div>
                {% endif %}
                
                <h1 class="display-3 fw-bold text-white mb-4" style="line-height: 1.2; text-shadow: 2px 2px 10px rgba(0,0,0,0.3);">
                    {{ hero_section.title_line1|default:"İçsel Farkındalığınızı" }} <br>
                    <span style="color: #ffd600;">{{ hero_section.title_line2|default:"Keşfedin" }}</span>
                </h1>
                <p class="lead text-white mb-4" style="font-size: 1.3rem; opacity: 0.95; text-shadow: 1px 1px 5px rgba(0,0,0,0.3);">
                    {{ hero_section.subtitle|default:"Yapay zeka destekli kişisel gelişim platformu. Duygusal denge, motivasyon ve içsel rehberlik için algoritmalarla desteklenen özel yöntemler." }}
                </p>
                <div class="d-flex flex-wrap gap-3 mb-4">
                    <a href="{{ hero_section.primary_button_url|default:'/spreads/' }}" class="btn btn-warning btn-lg px-5 py-3 d-inline-flex align-items-center" style="border-radius: 50px; font-weight: 700; box-shadow: 0 8px 20px rgba(255, 214, 0, 0.3); transition: all 0.3s ease;">
                        <i class="fas fa-lightbulb me-2 fs-5"></i>
                        <span>{{ hero_section.primary_button_text|default:"Rehberliğe Başla" }}</span>
                    </a>
                    <a href="{{ hero_section.secondary_button_url|default:'/daily-card/' }}" class="btn btn-outline-light btn-lg px-5 py-3 d-inline-flex align-items-center" style="border-radius: 50px; border-width: 2px; font-weight: 700; backdrop-filter: blur(10px); background: rgba(255,255,255,0.1);">
                        <i class="fas fa-sun me-2 fs-5"></i>
                        <span>{{ hero_section.secondary_button_text|default:"Günlük İlham" }}</span>
                    </a>
                </div>
                <div class="d-flex align-items-center gap-4 text-white" style="opacity: 0.9;">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-check-circle me-2" style="color: #ffd600;"></i>
                        <span>Kişiselleştirilmiş</span>
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="fas fa-check-circle me-2" style="color: #ffd600;"></i>
                        <span>AI Algoritmalı</span>
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="fas fa-check-circle me-2" style="color: #ffd600;"></i>
                        <span>Gizlilik Odaklı</span>
                    </div>
                </div>
            </div>
            
            <!-- Right Column - Visual Content -->
            <div class="col-lg-6 text-center">
                {% if hero_section.show_video and hero_section.get_video_id %}
                    <!-- YouTube Video -->
                    <div class="hero-video-wrapper" style="position: relative; animation: floating 6s ease-in-out infinite;">
                        <div style="position: relative; border-radius: 20px; overflow: hidden; box-shadow: 0 25px 80px rgba(255, 214, 0, 0.4); border: 3px solid rgba(255,255,255,0.3); background: #000;">
                            <div style="position: relative; padding-bottom: 56.25%; height: 0;">
                                <iframe 
                                    src="https://www.youtube-nocookie.com/embed/{{ hero_section.get_video_id }}?rel=0&modestbranding=1&controls=1" 
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                                    title="{{ hero_section.video_title|default:'YouTube video' }}"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    referrerpolicy="strict-origin-when-cross-origin"
                                    allowfullscreen>
                                </iframe>
                            </div>
                        </div>
                        {% if hero_section.video_title %}
                        <div style="margin-top: 15px; padding: 12px 20px; background: rgba(255, 214, 0, 0.15); border-radius: 12px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 214, 0, 0.3);">
                            <p class="mb-0 text-white fw-bold" style="font-size: 1.1rem;">
                                <i class="fas fa-video me-2" style="color: #ffd600;"></i>
                                {{ hero_section.video_title }}
                            </p>
                        </div>
                        {% endif %}
                        <div style="margin-top: 10px;">
                            <a href="https://www.youtube.com/watch?v={{ hero_section.get_video_id }}" 
                               target="_blank"
                               class="btn btn-outline-light btn-sm px-4 py-2"
                               style="border-radius: 20px; border-width: 2px; font-weight: 600; backdrop-filter: blur(10px); background: rgba(255,255,255,0.1);">
                                <i class="fab fa-youtube me-2"></i>
                                YouTube'da İzle
                            </a>
                        </div>
                    </div>
                {% else %}
                    <!-- Tarot Cards Stack Visual (Default) -->
                    <div class="hero-visual" style="position: relative; animation: floating 6s ease-in-out infinite;">
                        <div style="position: relative; display: inline-block;">
                            <div style="position: absolute; width: 280px; height: 450px; background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%); border-radius: 20px; backdrop-filter: blur(20px); border: 2px solid rgba(255,255,255,0.2); transform: rotate(-15deg); left: -30px; top: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);"></div>
                            <div style="position: absolute; width: 280px; height: 450px; background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.08) 100%); border-radius: 20px; backdrop-filter: blur(20px); border: 2px solid rgba(255,255,255,0.3); transform: rotate(-5deg); left: 10px; top: 10px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);"></div>
                            <div style="position: relative; width: 280px; height: 450px; background: linear-gradient(135deg, #ffd600 0%, #ffed4e 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 25px 80px rgba(255, 214, 0, 0.4); border: 3px solid rgba(255,255,255,0.3);">
                                <div style="text-align: center; color: #6B1B3D;">
                                    <i class="fas fa-moon fs-1 mb-3" style="display: block; font-size: 4rem;"></i>
                                    <div class="fw-bold fs-4">THE MOON</div>
                                    <div class="text-uppercase" style="font-size: 0.9rem; letter-spacing: 2px; opacity: 0.7;">XVIII</div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Features Highlight Section -->
<section class="py-5" style="background: #f8f9fa;">
    <div class="container">
        <div class="text-center mb-5">
            <span class="badge px-4 py-2 mb-3" style="background: linear-gradient(135deg, #6B1B3D 0%, #4A0E2A 100%); color: white; border-radius: 30px; font-size: 0.9rem;">
                <i class="fas fa-sparkles me-2"></i>Özelliklerimiz
            </span>
            <h2 class="display-5 fw-bold mb-3" style="color: #1a1a1a;">Neden İçsel Yolculuk?</h2>
            <p class="lead text-muted">Modern teknoloji ile kişisel gelişim bir arada</p>
        </div>
        
        <div class="row g-4 mb-5">
            <div class="col-md-6 col-lg-3">
                <div class="card feature-highlight-card h-100 border-0" style="border-radius: 20px; transition: all 0.3s ease; box-shadow: 0 5px 20px rgba(0,0,0,0.08);">
                    <div class="card-body text-center p-4">
                        <div class="icon-box mb-4 mx-auto" style="width: 80px; height: 80px; background: linear-gradient(135deg, #6B1B3D 0%, #4A0E2A 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(107, 27, 61, 0.3);">
                            <i class="fas fa-robot text-white fs-2"></i>
                        </div>
                        <h5 class="fw-bold mb-3" style="color: #1a1a1a;">AI Destekli Rehberlik</h5>
                        <p class="text-muted mb-0" style="font-size: 0.95rem;">Yapay zeka algoritmaları ile kişiselleştirilmiş, detaylı kişisel gelişim rehberliği</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-3">
                <div class="card feature-highlight-card h-100 border-0" style="border-radius: 20px; transition: all 0.3s ease; box-shadow: 0 5px 20px rgba(0,0,0,0.08);">
                    <div class="card-body text-center p-4">
                        <div class="icon-box mb-4 mx-auto" style="width: 80px; height: 80px; background: linear-gradient(135deg, #ffd600 0%, #ffed4e 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(255, 214, 0, 0.3);">
                            <i class="fas fa-star text-dark fs-2"></i>
                        </div>
                        <h5 class="fw-bold mb-3" style="color: #1a1a1a;">12 Burç Analizi</h5>
                        <p class="text-muted mb-0" style="font-size: 0.95rem;">Günlük burç yorumları ve detaylı astrolojik analizler</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-3">
                <div class="card feature-highlight-card h-100 border-0" style="border-radius: 20px; transition: all 0.3s ease; box-shadow: 0 5px 20px rgba(0,0,0,0.08);">
                    <div class="card-body text-center p-4">
                        <div class="icon-box mb-4 mx-auto" style="width: 80px; height: 80px; background: linear-gradient(135deg, #ff6f00 0%, #ff8f00 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(255, 111, 0, 0.3);">
                            <i class="fas fa-cards text-white fs-2"></i>
                        </div>
                        <h5 class="fw-bold mb-3" style="color: #1a1a1a;">Çeşitli Yöntemler</h5>
                        <p class="text-muted mb-0" style="font-size: 0.95rem;">Farklı derinlik seviyelerinde rehberlik metodları ve analiz seçenekleri</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-3">
                <div class="card feature-highlight-card h-100 border-0" style="border-radius: 20px; transition: all 0.3s ease; box-shadow: 0 5px 20px rgba(0,0,0,0.08);">
                    <div class="card-body text-center p-4">
                        <div class="icon-box mb-4 mx-auto" style="width: 80px; height: 80px; background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);">
                            <i class="fas fa-shield-check text-white fs-2"></i>
                        </div>
                        <h5 class="fw-bold mb-3" style="color: #1a1a1a;">Gizlilik Garantisi</h5>
                        <p class="text-muted mb-0" style="font-size: 0.95rem;">Verileriniz güvende, sorularınız gizli kalır</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- AI Assistant Call-to-Action Section -->
<section class="py-5" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <div class="d-flex align-items-center mb-3">
                    <div class="icon-box me-4" style="width: 80px; height: 80px; background: rgba(255,255,255,0.2); border-radius: 20px; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px);">
                        <i class="fas fa-brain text-white" style="font-size: 2.5rem;"></i>
                    </div>
                    <div>
                        <h2 class="text-white mb-2 fw-bold">AI Kişisel Gelişim Danışmanı</h2>
                        <p class="text-white-50 mb-0" style="font-size: 1.1rem;">Duygusal denge, motivasyon ve içsel farkındalık için yapay zeka destekli rehberlik</p>
                    </div>
                </div>
                <ul class="list-unstyled text-white mb-4 mb-lg-0">
                    <li class="mb-2"><i class="fas fa-check-circle me-2 text-warning"></i>7/24 anında yanıt</li>
                    <li class="mb-2"><i class="fas fa-check-circle me-2 text-warning"></i>Kişiselleştirilmiş öneriler</li>
                    <li class="mb-2"><i class="fas fa-check-circle me-2 text-warning"></i>Duygusal denge ve motivasyon stratejileri</li>
                    <li class="mb-2"><i class="fas fa-check-circle me-2 text-warning"></i>İçsel farkındalık geliştirme teknikleri</li>
                </ul>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a href="{% url 'zodiac:ai_assistant' %}" class="btn btn-light btn-lg px-5 py-3" style="border-radius: 50px; font-weight: 700; box-shadow: 0 8px 20px rgba(0,0,0,0.2);">
                    <i class="fas fa-comments me-2"></i>Şimdi Danış
                </a>
                <p class="text-white-50 mt-3 mb-0"><small><i class="fas fa-gift me-1"></i>Ücretsiz kullanım</small></p>
            </div>
        </div>
    </div>
</section>

<!-- Spreads Section -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">Popüler Rehberlik Yöntemleri</h2>
        <div class="row g-4">
            {% for spread in popular_spreads %}
                <div class="col-md-6 col-lg-3">
                    <div class="card feature-card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-{% if spread.card_count == 1 %}star{% elif spread.card_count == 3 %}fire{% elif spread.card_count <= 5 %}heart{% else %}circle{% endif %} feature-icon"></i>
                            <h4>{{ spread.name }}</h4>
                            <p class="text-muted">
                                {{ spread.description|truncatechars:80 }}
                            </p>
                            <div class="mb-3">
                                <span class="badge bg-primary">{{ spread.card_count }} Kart</span>
                                <span class="badge bg-secondary">{{ spread.get_difficulty_level_display }}</span>
                            </div>
                            <a href="{% url 'tarot:spread_detail' spread.slug %}" class="btn btn-outline-warning">
                                <i class="fas fa-play me-1"></i>Başla
                            </a>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="col-12 text-center">
                    <p class="text-muted">Henüz yayılım yok. Admin panelinden yayılım ekleyebilirsiniz.</p>
                </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-4">
            <a href="{% url 'tarot:spreads' %}" class="btn btn-outline-primary">
                <i class="fas fa-list me-2"></i>Tüm Yöntemleri Gör
            </a>
        </div>
    </div>
</section>

<!-- Reklam -->
{% include 'includes/ad_inline.html' %}

<!-- Quick Reading Section -->
<section class="py-5 content-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <h2 class="mb-4">Hızlı Rehberlik Seansı</h2>
                <p class="text-muted mb-5">
                    Bir soru sorun ve rehberlik kartlarının size ne söylediğini öğrenin
                </p>
                
                {% if user.is_authenticated %}
                    <div class="card">
                        <div class="card-body p-4">
                            <form method="post" action="{% url 'tarot:create_reading' %}" id="quickReadingForm">
                                {% csrf_token %}
                                <input type="hidden" name="spread_id" value="1">
                                <div class="mb-3">
                                    <textarea 
                                        class="form-control" 
                                        name="question" 
                                        rows="3" 
                                        placeholder="Kartlara sormak istediğiniz soruyu yazın..."
                                        required
                                    ></textarea>
                                </div>
                                <button type="submit" class="btn btn-warning btn-lg">
                                    <i class="fas fa-magic me-2"></i>Kartları Çek
                                </button>
                            </form>
                        </div>
                    </div>
                {% else %}
                    <div class="alert alert-info">
                        <h5><i class="fas fa-info-circle me-2"></i>Rehberlik İçin Giriş Yapın</h5>
                        <p class="mb-3">Kişiselleştirilmiş rehberlik seansı için hesap oluşturun</p>
                        <a href="#" class="btn btn-primary me-2">Giriş Yap</a>
                        <a href="#" class="btn btn-outline-primary">Kayıt Ol</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Daily Horoscopes Section -->
{% if daily_horoscopes %}
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5">
            <i class="fas fa-star me-2"></i>Günlük Burç Yorumları
        </h2>
        <div class="row g-4">
            {% for item in daily_horoscopes %}
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 horoscope-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="zodiac-symbol me-3">
                                    {{ item.sign.symbol }}
                                </div>
                                <div>
                                    <h5 class="mb-0">{{ item.sign.name }}</h5>
                                    <small class="text-muted">{{ item.sign.date_range }}</small>
                                </div>
                            </div>
                            <p class="card-text">
                                {{ item.horoscope.general|truncatewords:20 }}
                            </p>
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <span class="badge bg-success">Aşk: {{ item.horoscope.love_score }}/10</span>
                                    <span class="badge bg-info">İş: {{ item.horoscope.career_score }}/10</span>
                                </div>
                                <a href="{% url 'zodiac:sign_detail' item.sign.slug %}" class="btn btn-sm btn-outline-primary">
                                    Detay <i class="fas fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{% url 'zodiac:daily_horoscopes' %}" class="btn btn-primary btn-lg">
                <i class="fas fa-calendar-day me-2"></i>Tüm Burç Yorumları
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- YouTube Videos Section -->
{% if youtube_videos %}
<section class="py-5" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="text-white mb-3">
                <i class="fab fa-youtube me-2" style="color: #FF0000;"></i>YouTube Kanalımız
            </h2>
            <p class="text-white-50" style="font-size: 1.1rem;">
                Rehberlik, astroloji ve kişisel gelişim videolarımızı izleyin
            </p>
        </div>
        <div class="row g-4">
            {% for video in youtube_videos %}
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-lg" style="border-radius: 20px; overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease;">
                        <div style="position: relative; padding-top: 56.25%; background: #000; cursor: pointer;" 
                             onclick="openVideoModal('{{ video.video_id }}', '{{ video.title|escapejs }}')">
                            <img src="{{ video.thumbnail }}" 
                                 alt="{{ video.title }}" 
                                 style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; transition: opacity 0.3s ease;">
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 68px; height: 48px; background: rgba(255, 0, 0, 0.9); border-radius: 12px; transition: background 0.3s ease;">
                                <svg height="100%" version="1.1" viewBox="0 0 68 48" width="100%">
                                    <path d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z" fill="#FF0000"></path>
                                    <path d="M 45,24 27,14 27,34" fill="#fff"></path>
                                </svg>
                            </div>
                        </div>
                        <div class="card-body" style="background: linear-gradient(to bottom, #ffffff 0%, #f8f9fa 100%);">
                            <h5 class="card-title mb-3" style="font-weight: 700; color: #2c3e50; min-height: 48px; font-size: 1rem; line-height: 1.4;">
                                {{ video.title|truncatechars:60 }}
                            </h5>
                            <p class="card-text text-muted mb-3" style="font-size: 0.9rem; min-height: 60px;">
                                {{ video.description|truncatechars:100 }}
                            </p>
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">
                                    <i class="far fa-calendar-alt me-1"></i>
                                    {{ video.published_at|date:"d M Y" }}
                                </small>
                                <button onclick="openVideoModal('{{ video.video_id }}', '{{ video.title|escapejs }}')" 
                                   class="btn btn-sm btn-danger d-inline-flex align-items-center"
                                   style="border-radius: 20px; padding: 6px 16px; font-weight: 600; border: none;">
                                    <i class="fas fa-play me-1"></i>
                                    İzle
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="text-center mt-5">
            <a href="https://www.youtube.com/@AstroYasam-g8y?sub_confirmation=1" 
               target="_blank" 
               class="btn btn-danger btn-lg px-5 py-3 d-inline-flex align-items-center"
               style="border-radius: 50px; font-weight: 700; box-shadow: 0 8px 20px rgba(255, 0, 0, 0.3);">
                <i class="fab fa-youtube me-2 fs-5"></i>
                <span>Kanalımıza Abone Ol</span>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Reklam -->
{% include 'includes/ad_inline.html' %}

<!-- Recent Public Readings Section -->
{% if recent_readings %}
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">
            <i class="fas fa-users me-2"></i>Son Rehberlik Seansları
        </h2>
        <div class="row g-4">
            {% for reading in recent_readings %}
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 reading-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="avatar-circle me-2">
                                    {{ reading.user.username|slice:":1"|upper }}
                                </div>
                                <div>
                                    <h6 class="mb-0">{{ reading.user.username }}</h6>
                                    <small class="text-muted">{{ reading.created_at|timesince }} önce</small>
                                </div>
                            </div>
                            <h5 class="card-title">{{ reading.spread.name }}</h5>
                            <p class="card-text text-muted">
                                <i class="fas fa-question-circle me-1"></i>
                                {{ reading.question|truncatewords:10 }}
                            </p>
                            <div class="mb-3">
                                <span class="badge bg-warning">{{ reading.cards|length }} Kart</span>
                            </div>
                            <a href="{% url 'tarot:reading_detail' reading.id %}" class="btn btn-sm btn-outline-warning w-100">
                                <i class="fas fa-eye me-1"></i>Okumayı Gör
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Technology Section -->
<section class="py-5 bg-white">
    <div class="container">
        <div class="text-center mb-5">
            <span class="badge px-4 py-2 mb-3" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 30px; font-size: 0.9rem;">
                <i class="fas fa-rocket me-2"></i>Bilimsel Astroloji
            </span>
            <h2 class="display-5 fw-bold mb-3" style="color: #1a1a1a;">Profesyonel Astronomik Hesaplamalar</h2>
            <p class="lead text-muted">NASA verileri ile Swiss Ephemeris - Endüstri standardında doğruluk</p>
        </div>
        
        <div class="row g-4 mb-5">
            <!-- Swiss Ephemeris -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 border-0" style="border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); transition: all 0.3s ease;">
                    <div class="card-body text-center p-4">
                        <div class="tech-icon mb-4 mx-auto" style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);">
                            <i class="fas fa-satellite text-white fs-2"></i>
                        </div>
                        <h5 class="fw-bold mb-3" style="color: #1a1a1a;">Swiss Ephemeris</h5>
                        <p class="text-muted mb-3" style="font-size: 0.95rem;">Dünya standardı astronomik hesaplama kütüphanesi</p>
                        <div class="badge bg-light text-dark mb-2">0.001° Hassasiyet</div>
                    </div>
                </div>
            </div>
            
            <!-- NASA JPL -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 border-0" style="border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); transition: all 0.3s ease;">
                    <div class="card-body text-center p-4">
                        <div class="tech-icon mb-4 mx-auto" style="width: 80px; height: 80px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(240, 147, 251, 0.3);">
                            <i class="fas fa-space-shuttle text-white fs-2"></i>
                        </div>
                        <h5 class="fw-bold mb-3" style="color: #1a1a1a;">NASA JPL DE431</h5>
                        <p class="text-muted mb-3" style="font-size: 0.95rem;">Uzay araçları için kullanılan gerçek veriler</p>
                        <div class="badge bg-light text-dark mb-2">6000 Yıl Kapsama</div>
                    </div>
                </div>
            </div>
            
            <!-- Geocoding -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 border-0" style="border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); transition: all 0.3s ease;">
                    <div class="card-body text-center p-4">
                        <div class="tech-icon mb-4 mx-auto" style="width: 80px; height: 80px; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(17, 153, 142, 0.3);">
                            <i class="fas fa-map-marked-alt text-white fs-2"></i>
                        </div>
                        <h5 class="fw-bold mb-3" style="color: #1a1a1a;">GPS Koordinat</h5>
                        <p class="text-muted mb-3" style="font-size: 0.95rem;">Otomatik konum tespiti ile hassas hesaplama</p>
                        <div class="badge bg-light text-dark mb-2">Nominatim API</div>
                    </div>
                </div>
            </div>
            
            <!-- AI Integration -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 border-0" style="border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); transition: all 0.3s ease;">
                    <div class="card-body text-center p-4">
                        <div class="tech-icon mb-4 mx-auto" style="width: 80px; height: 80px; background: linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%); border-radius: 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(142, 45, 226, 0.3);">
                            <i class="fas fa-brain text-white fs-2"></i>
                        </div>
                        <h5 class="fw-bold mb-3" style="color: #1a1a1a;">AI Yorumlama</h5>
                        <p class="text-muted mb-3" style="font-size: 0.95rem;">Gelişmiş yapay zeka ile 10 gezegen analizi</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Comparison -->
        <div class="row mb-4">
            <div class="col-lg-10 mx-auto">
                <div class="card border-0" style="border-radius: 20px; box-shadow: 0 5px 30px rgba(0,0,0,0.1); overflow: hidden;">
                    <div class="card-header text-white text-center py-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <h4 class="mb-0"><i class="fas fa-balance-scale me-2"></i>Basit Algoritmalar vs Swiss Ephemeris</h4>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th class="py-3 ps-4">Özellik</th>
                                        <th class="py-3 text-center"><span class="badge bg-danger">Basit Yöntem</span></th>
                                        <th class="py-3 text-center"><span class="badge bg-success">Bizim Sistemimiz</span></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="ps-4"><i class="fas fa-crosshairs me-2 text-primary"></i><strong>Hassasiyet</strong></td>
                                        <td class="text-center"><span class="text-danger">~30° hata</span></td>
                                        <td class="text-center"><span class="text-success fw-bold">0.001° hassasiyet</span></td>
                                    </tr>
                                    <tr>
                                        <td class="ps-4"><i class="fas fa-moon me-2 text-primary"></i><strong>Ay Burcu</strong></td>
                                        <td class="text-center"><span class="text-muted">Ay bazlı tahmin</span></td>
                                        <td class="text-center"><span class="text-success">Gerçek ekliptik boylam</span></td>
                                    </tr>
                                    <tr>
                                        <td class="ps-4"><i class="fas fa-arrow-up me-2 text-primary"></i><strong>Yükselen Burç</strong></td>
                                        <td class="text-center"><span class="text-muted">Saat/2 formülü</span></td>
                                        <td class="text-center"><span class="text-success">Placidus ev sistemi</span></td>
                                    </tr>
                                    <tr>
                                        <td class="ps-4"><i class="fas fa-globe me-2 text-primary"></i><strong>Konum</strong></td>
                                        <td class="text-center"><span class="text-muted">Yok / Manuel</span></td>
                                        <td class="text-center"><span class="text-success">Otomatik GPS</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center">
            <a href="{% url 'zodiac:technology' %}" class="btn btn-lg px-5 py-3" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 50px; font-weight: 700; box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);">
                <i class="fas fa-microscope me-2"></i>Detaylı Teknik Bilgiler
            </a>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="py-5" style="background: linear-gradient(135deg, #6B1B3D 0%, #4A0E2A 100%); position: relative; overflow: hidden;">
    <!-- Decorative circles -->
    <div style="position: absolute; top: -100px; right: 10%; width: 400px; height: 400px; background: rgba(255,255,255,0.03); border-radius: 50%; filter: blur(80px);"></div>
    <div style="position: absolute; bottom: -150px; left: 5%; width: 500px; height: 500px; background: rgba(255,255,255,0.02); border-radius: 50%; filter: blur(100px);"></div>
    
    <div class="container position-relative" style="padding: 60px 0;">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold text-white mb-3">Rakamlarla İçsel Yolculuk</h2>
            <p class="lead text-white" style="opacity: 0.9;">Binlerce kullanıcı bize güveniyor</p>
        </div>
        
        <div class="row g-4 text-center text-white">
            <div class="col-6 col-md-3">
                <div class="stat-card p-4" style="background: rgba(255,255,255,0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease;">
                    <div class="stat-icon mb-3">
                        <i class="fas fa-users fs-1" style="color: #ffd600;"></i>
                    </div>
                    <h2 class="display-4 fw-bold mb-2" style="color: #ffd600; text-shadow: 0 0 20px rgba(255,214,0,0.5);">15K+</h2>
                    <p class="mb-0 text-uppercase" style="font-size: 0.9rem; letter-spacing: 2px; opacity: 0.9; font-weight: 600;">Kullanıcı</p>
                </div>
            </div>
            
            <div class="col-6 col-md-3">
                <div class="stat-card p-4" style="background: rgba(255,255,255,0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease;">
                    <div class="stat-icon mb-3">
                        <i class="fas fa-cards fs-1" style="color: #ffd600;"></i>
                    </div>
                    <h2 class="display-4 fw-bold mb-2" style="color: #ffd600; text-shadow: 0 0 20px rgba(255,214,0,0.5);">50K+</h2>
                    <p class="mb-0 text-uppercase" style="font-size: 0.9rem; letter-spacing: 2px; opacity: 0.9; font-weight: 600;">Fal Bakımı</p>
                </div>
            </div>
            
            <div class="col-6 col-md-3">
                <div class="stat-card p-4" style="background: rgba(255,255,255,0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease;">
                    <div class="stat-icon mb-3">
                        <i class="fas fa-star fs-1" style="color: #ffd600;"></i>
                    </div>
                    <h2 class="display-4 fw-bold mb-2" style="color: #ffd600; text-shadow: 0 0 20px rgba(255,214,0,0.5);">12</h2>
                    <p class="mb-0 text-uppercase" style="font-size: 0.9rem; letter-spacing: 2px; opacity: 0.9; font-weight: 600;">Burç Analizi</p>
                </div>
            </div>
            
            <div class="col-6 col-md-3">
                <div class="stat-card p-4" style="background: rgba(255,255,255,0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s ease;">
                    <div class="stat-icon mb-3">
                        <i class="fas fa-clock fs-1" style="color: #ffd600;"></i>
                    </div>
                    <h2 class="display-4 fw-bold mb-2" style="color: #ffd600; text-shadow: 0 0 20px rgba(255,214,0,0.5);">24/7</h2>
                    <p class="mb-0 text-uppercase" style="font-size: 0.9rem; letter-spacing: 2px; opacity: 0.9; font-weight: 600;">Hizmet</p>
                </div>
            </div>
        </div>
        
        <div class="row mt-5">
            <div class="col-12 text-center">
                <div class="d-inline-flex align-items-center gap-2 px-4 py-3" style="background: rgba(255,255,255,0.15); border-radius: 50px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3);">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                    </div>
                    <span class="text-white fw-bold mx-2">4.8/5</span>
                    <span class="text-white" style="opacity: 0.9;">Ortalama Değerlendirme</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <span class="badge px-4 py-2 mb-3" style="background: linear-gradient(135deg, #6B1B3D 0%, #4A0E2A 100%); color: white; border-radius: 30px; font-size: 0.9rem;">
                <i class="fas fa-heart me-2"></i>Kullanıcı Yorumları
            </span>
            <h2 class="display-5 fw-bold mb-3" style="color: #1a1a1a;">Kullanıcılarımız Ne Diyor?</h2>
            <p class="lead text-muted">Binlerce mutlu kullanıcımızın deneyimleri</p>
        </div>
        
        <div class="row g-4">
            <div class="col-md-6 col-lg-4">
                <div class="card testimonial-card h-100 border-0" style="border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); transition: all 0.3s ease;">
                    <div class="card-body p-4">
                        <div class="stars mb-3">
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                        </div>
                        <p class="mb-4" style="font-size: 1rem; line-height: 1.7; color: #333;">
                            "Harika bir uygulama! Rehberlik seansları çok detaylı ve kişiselleştirilmiş. AI destekli sistem gerçekten fark yaratıyor. Her gün burç yorumlarımı takip ediyorum."
                        </p>
                        <div class="d-flex align-items-center">
                            <div class="avatar me-3" style="width: 50px; height: 50px; background: linear-gradient(135deg, #6B1B3D 0%, #4A0E2A 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.2rem;">
                                AK
                            </div>
                            <div>
                                <h6 class="mb-0 fw-bold" style="color: #1a1a1a;">Ayşe K.</h6>
                                <small class="text-muted"><i class="fas fa-star-and-crescent me-1"></i>Koç Burcu</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <div class="card testimonial-card h-100 border-0" style="border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); transition: all 0.3s ease;">
                    <div class="card-body p-4">
                        <div class="stars mb-3">
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                        </div>
                        <p class="mb-4" style="font-size: 1rem; line-height: 1.7; color: #333;">
                            "Yıllardır kişisel gelişimle ilgileniyorum. Bu platform gerçekten profesyonel. Özellikle detaylı rehberlik yönteminin analizi çok isabetliydi. Herkese tavsiye ederim!"
                        </p>
                        <div class="d-flex align-items-center">
                            <div class="avatar me-3" style="width: 50px; height: 50px; background: linear-gradient(135deg, #ffd600 0%, #ffed4e 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #6B1B3D; font-weight: bold; font-size: 1.2rem;">
                                MY
                            </div>
                            <div>
                                <h6 class="mb-0 fw-bold" style="color: #1a1a1a;">Mehmet Y.</h6>
                                <small class="text-muted"><i class="fas fa-star-and-crescent me-1"></i>Aslan Burcu</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <div class="card testimonial-card h-100 border-0" style="border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); transition: all 0.3s ease;">
                    <div class="card-body p-4">
                        <div class="stars mb-3">
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                        </div>
                        <p class="mb-4" style="font-size: 1rem; line-height: 1.7; color: #333;">
                            "Günlük tek kart çekiyorum her sabah. Kartların mesajları günümü şekillendiriyor. Arayüz çok şık ve kullanımı kolay. Teşekkürler!"
                        </p>
                        <div class="d-flex align-items-center">
                            <div class="avatar me-3" style="width: 50px; height: 50px; background: linear-gradient(135deg, #ff6f00 0%, #ff8f00 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.2rem;">
                                ZS
                            </div>
                            <div>
                                <h6 class="mb-0 fw-bold" style="color: #1a1a1a;">Zeynep S.</h6>
                                <small class="text-muted"><i class="fas fa-star-and-crescent me-1"></i>Balık Burcu</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_css %}
<style>
/* Floating Animation */
@keyframes floating {
    0%, 100% { 
        transform: translateY(0px); 
    }
    50% { 
        transform: translateY(-20px); 
    }
}

/* Hero Buttons Hover */
.hero-section-modern .btn-warning:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(255, 214, 0, 0.4) !important;
}

.hero-section-modern .btn-outline-light:hover {
    background: rgba(255,255,255,0.2) !important;
    border-color: white !important;
    transform: translateY(-3px);
}

/* Feature Highlight Cards Hover */
.feature-highlight-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.15) !important;
}

.feature-highlight-card:hover .icon-box {
    transform: rotate(5deg) scale(1.1);
}

.feature-highlight-card .icon-box {
    transition: all 0.3s ease;
}

/* Stats Cards Hover */
.stat-card:hover {
    transform: translateY(-5px) scale(1.05);
    background: rgba(255,255,255,0.15) !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

/* Testimonial Cards Hover */
.testimonial-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.12) !important;
}

/* Technology Cards Hover */
.tech-icon {
    transition: all 0.3s ease;
}

.card:has(.tech-icon):hover .tech-icon {
    transform: rotate(5deg) scale(1.1);
}

.card:has(.tech-icon):hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.15) !important;
}

.horoscope-card {
    border: none;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.horoscope-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.zodiac-symbol {
    font-size: 2.5rem;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #6B1B3D 0%, #4A0E2A 100%);
    border-radius: 50%;
    color: white;
}

.reading-card {
    border: none;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.reading-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.avatar-circle {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 1.2rem;
}

/* YouTube Video Modal */
.video-modal {
    display: none;
    position: fixed;
    z-index: 10000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.95);
    animation: fadeIn 0.3s ease;
    overflow-y: auto;
    padding: 20px;
}

.video-modal-content {
    position: relative;
    margin: 2% auto;
    width: 90%;
    max-width: 900px;
    animation: slideIn 0.3s ease;
}

.video-wrapper {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    overflow: hidden;
    background: #000;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
}

.video-wrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    border-radius: 12px;
}

.close-video {
    position: absolute;
    top: -50px;
    right: 0;
    color: #fff;
    font-size: 32px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.3s ease;
    z-index: 10001;
    background: rgba(255, 0, 0, 0.8);
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid #fff;
}

.close-video:hover {
    background: rgba(255, 0, 0, 1);
    transform: scale(1.1);
}

.video-title {
    color: #fff;
    margin-top: 15px;
    font-size: 1.2rem;
    font-weight: 600;
    text-align: center;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@media (max-width: 768px) {
    .video-modal-content {
        width: 95%;
        margin: 5% auto;
    }
    
    .close-video {
        top: -45px;
        width: 40px;
        height: 40px;
        font-size: 24px;
    }
    
    .video-actions {
        flex-direction: column;
        gap: 10px !important;
    }
    
    .video-actions button {
        width: 100%;
        justify-content: center;
    }
}

@media (max-width: 480px) {
    .video-modal {
        padding: 10px;
    }
    
    .video-modal-content {
        margin: 3% auto;
    }
    
    .video-actions button {
        padding: 10px 20px !important;
        font-size: 0.9rem;
    }
}
</style>

<!-- YouTube Video Modal -->
<div id="videoModal" class="video-modal" onclick="closeVideoModal(event)">
    <div class="video-modal-content">
        <span class="close-video" onclick="closeVideoModal(event)">&times;</span>
        <div class="video-wrapper">
            <iframe id="videoPlayer" 
                    src="" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
            </iframe>
        </div>
        <h3 id="videoTitle" class="video-title"></h3>
        
        <!-- Video Action Buttons -->
        <div class="video-actions" style="display: flex; justify-content: center; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
            <button id="likeButton" onclick="likeVideo(event)" 
                    class="btn btn-lg d-inline-flex align-items-center"
                    style="background: rgba(255, 255, 255, 0.15); 
                           color: #fff; 
                           border: 2px solid rgba(255, 255, 255, 0.3); 
                           border-radius: 50px; 
                           padding: 12px 24px;
                           font-weight: 600;
                           transition: all 0.3s ease;
                           backdrop-filter: blur(10px);">
                <i class="fas fa-thumbs-up me-2"></i>
                <span>Beğen</span>
            </button>
            
            <button id="subscribeButton" onclick="subscribeChannel(event)" 
                    class="btn btn-danger btn-lg d-inline-flex align-items-center"
                    style="border-radius: 50px; 
                           padding: 12px 24px;
                           font-weight: 600;
                           transition: all 0.3s ease;
                           box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);">
                <i class="fab fa-youtube me-2"></i>
                <span>Abone Ol</span>
            </button>
            
            <button onclick="openYouTubeLink(event)" 
                    class="btn btn-lg d-inline-flex align-items-center"
                    style="background: rgba(255, 255, 255, 0.15); 
                           color: #fff; 
                           border: 2px solid rgba(255, 255, 255, 0.3); 
                           border-radius: 50px; 
                           padding: 12px 24px;
                           font-weight: 600;
                           transition: all 0.3s ease;
                           backdrop-filter: blur(10px);">
                <i class="fas fa-external-link-alt me-2"></i>
                <span>YouTube'da Aç</span>
            </button>
        </div>
        
        <p style="color: rgba(255,255,255,0.7); text-align: center; margin-top: 15px; font-size: 0.9rem;">
            <i class="fas fa-info-circle me-1"></i>
            Beğeni ve abone işlemleri için YouTube'da oturum açmanız gerekiyor
        </p>
    </div>
</div>

<script>
let currentVideoId = '';
let currentVideoUrl = '';

function openVideoModal(videoId, videoTitle) {
    const modal = document.getElementById('videoModal');
    const iframe = document.getElementById('videoPlayer');
    const title = document.getElementById('videoTitle');
    
    currentVideoId = videoId;
    currentVideoUrl = `https://www.youtube.com/watch?v=${videoId}`;
    
    // YouTube embed URL with autoplay and additional parameters for better interaction
    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1&enablejsapi=1`;
    title.textContent = videoTitle;
    modal.style.display = 'block';
    
    // Prevent body scroll when modal is open
    document.body.style.overflow = 'hidden';
}

function likeVideo(event) {
    event.stopPropagation();
    // YouTube API requires authentication, so we'll open the video page
    window.open(currentVideoUrl, '_blank');
    
    // Visual feedback
    const likeButton = document.getElementById('likeButton');
    likeButton.style.background = 'rgba(76, 175, 80, 0.3)';
    likeButton.style.borderColor = '#4CAF50';
    likeButton.innerHTML = '<i class="fas fa-check me-2"></i><span>YouTube\'da Beğen</span>';
    
    setTimeout(() => {
        likeButton.style.background = 'rgba(255, 255, 255, 0.15)';
        likeButton.style.borderColor = 'rgba(255, 255, 255, 0.3)';
        likeButton.innerHTML = '<i class="fas fa-thumbs-up me-2"></i><span>Beğen</span>';
    }, 2000);
}

function subscribeChannel(event) {
    event.stopPropagation();
    // YouTube channel subscription link
    const channelUrl = `https://www.youtube.com/@AstroYasam-g8y?sub_confirmation=1`;
    window.open(channelUrl, '_blank');
    
    // Visual feedback
    const subscribeButton = document.getElementById('subscribeButton');
    subscribeButton.innerHTML = '<i class="fas fa-check-circle me-2"></i><span>Abone Ol Sayfası Açıldı</span>';
    subscribeButton.style.background = '#4CAF50';
    
    setTimeout(() => {
        subscribeButton.innerHTML = '<i class="fab fa-youtube me-2"></i><span>Abone Ol</span>';
        subscribeButton.style.background = '';
    }, 3000);
}

function openYouTubeLink(event) {
    event.stopPropagation();
    window.open(currentVideoUrl, '_blank');
}

function closeVideoModal(event) {    // YouTube embed URL with autoplay
    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1`;
    title.textContent = videoTitle;
    modal.style.display = 'block';
    
    // Prevent body scroll when modal is open
    document.body.style.overflow = 'hidden';
}

function closeVideoModal(event) {
    // Only close if clicking outside the video or on close button
    if (event.target.classList.contains('video-modal') || 
        event.target.classList.contains('close-video') ||
        event.target.innerHTML === '&times;') {
        const modal = document.getElementById('videoModal');
        const iframe = document.getElementById('videoPlayer');
        
        // Stop video by clearing src
        iframe.src = '';
        modal.style.display = 'none';
        
        // Re-enable body scroll
        document.body.style.overflow = 'auto';
    }
}

// Close modal with Escape key
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        const modal = document.getElementById('videoModal');
        if (modal.style.display === 'block') {
            closeVideoModal({target: modal});
        }
    }
});
</script>
{% endblock %}